<!doctype html>
<!--
Design by Free Responsive Templates
http://www.free-responsive-templates.com
Released for free under a Creative Commons Attribution 3.0 Unported License (CC BY 3.0) 
-->
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Welcome Student - Rocket System</title>
<link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Belgrano' rel='stylesheet' type='text/css'>
<link href="css/mainStyles.css" rel="stylesheet" type="text/css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<script language="javascript" type="text/javascript">
    
    window.onload = function(){
        // NEED TO CHANGE THIS TO DISPLAY STUDENT'S SCHEDULE ON LOAD
        $.ajax({
            url: '/TeamRocket/DisplayAllPendingStudentAccountRequests',
            type: 'GET',
            dataType: 'JSON',
            success: function (data){   
                $("#studentList").html("");
                for (var i = 0; i < data.length; i++){
                    $("#studentList").append("<p>Name: " + data[i].name + " - - - - Email: "
                            + data[i].email + "<input type='checkbox' name='emails' value='" + data[i].email + "'></p>");
                }
            }
        });
    };
    
    function SearchFriends(){
       $.ajax({
            url: '/TeamRocket/SearchFriends',
            type: 'GET',
            dataType: 'JSON',
            data: {name: $("#friendsName").val()},
            success: function (data){   
                $("#studentList").html("");
                if (data.length == 0){
                    $("#studentList").append("Your search returned no results.  Please check spelling, or try again.");
                }
                else{
                    for (var i = 0; i < data.length; i++){
                        $("#studentList").append("<p>Name: " + data[i].name + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type='checkbox' name='names' value='" + data[i].name + "'></p>");
                    }
                }
            }
        });
    }
    
    function ApproveSelected(){
        var data = { 'emails': [] };
        $("input:checkbox:checked").each(function(){
           data['emails'].push($(this).val());
        });
        alert(data);
        $.post('/TeamRocket/SearchFriends', data, ShowApproved(data));
        var e="?"
        $('input:checkbox.emails').each(function () {
            if(this.checked){
               e= e+ "?"+this.value;
           }
        });
        alert(e);
    }
    
    function ShowApproved(data){
        $("#studentList").html("");
                $("#studentList").append("The following accounts have been approved:");
                for (var i = 0; i < data.length; i++){
                    $("#studentList").append("<p>Name: " + data[i].name + " - - - - Email: " + data[i].email + "</p>");
                }
   }
</script>
</head>
<body>
<div class="wrapper">
    <header>
        <div class="logo"><h1><a href="">Corn Food</a></h1></div>
        <nav>
            <ul id="navlist">
                <li><a href="index.html">Home</a></li>
                <li id="active"><a href="#">Student</a></li>
                <li><a href="index.html">logout</a></li>
            </ul>
        </nav>
        <div class="clearfloat"></div>
    </header>
    <div class="bodyContainer">

    <!-- section 0 -->

        <section>
            <div><img src="images/headerPic.jpg" alt=""></div>
           <input id = "approveAllStudentRequestButton" style = "font-weight: bold; font-size: 12pt;width:" type = "button" value = "Approve All Pending Requests"  onclick = "ApproveAll()" />
          &nbsp;
           <input  id = "deleteSchoolButton" style = "font-weight: bold; font-size: 12pt;width:" type = "button" value = "Delete Student Account"  onclick = "" /> 
        </section>
   <!-- section 1 -->
   <section>
    <div class>
       section 1
       <br/> 
       <input id = "approveButton" style = "font-weight: bold; font-size: 12pt;width:" type = "button" value = "Approve"  onclick = "ApproveSelected()" />
       &nbsp;
       <input  id = "deleteStduentAccount" style = "font-weight: bold; font-size: 12pt;width:" type = "button" value = "Delete a pending student list"  onclick = "" /> 
       <br/>
    </div>  
   </section>

   <!-- section 2-->
    <section>
    <div class>
        <!-- MAKE THIS A FRIENDS SECTION -->
        <div id="studentListDiv">
          <h3>Friends</h3>
          <div id="studentList" style="float:left; width:100%; min-height: 200px"></div>
        </div>
      Section 2
      <br>
      <br>
        <h3>
            Enter a student's name. 
            <input type="text" id="friendsName" name="friendsName">
            <input id="searchFriendsButton" style = "font-weight: bold; font-size: 12pt;width:" type = "button" value = "Find Friends"  onclick = "SearchFriends()" />
        </h3>
      <input id="addFriendsButton" style = "font-weight: bold; font-size: 12pt;width:" type = "button" value = "Add Friends"  onclick = "AddFriends()" /> 
    </div>  
    </section>    


 <!-- section 3 -->

 <section>

 </section>



 <!-- section 4 -->
 <section>

 </section>

        <section>
            <h2>About</h2>
            <p>
                
            </p>
            <p class="readMore"><a href="">{ Read More! }</a></p>
        </section>
    </div>
    <div class="clearfloat"></div>
    <footer>
        <p>
            Copyright &copy; Rocket System. All rights reserved. Designed by <a href="http://www.free-responsive-templates.com" title="free responsive templates">Free Responsive Templates</a>, Validation 
            <a class="footerLink" href="http://validator.w3.org/check/referer" title="This page validates as HTML5"><abbr title="HyperText Markup Language">HTML5</abbr></a> | 
            <a class="footerLink" href="http://jigsaw.w3.org/css-validator/check/referer" title="This page validates as CSS"><abbr title="Cascading Style Sheets">CSS3</abbr></a>
        </p>
    </footer>
</div>
</body>
</html>
